
<p-toast key="globaltst"></p-toast> 

<p-dialog header="Closing Stock" [(visible)]="displayClosingStockList" [modal]="true" [styleClass]="'custom-dialog'" [style]="{ width: '100vw', height: '100vh', 'max-width': '100%', 'max-height': '100%'}">
    
    <div class="grid">
        <div class="col-12">
            <div class="card">
                
                <p-table #dt1 [value]="csList" dataKey="id" [rows]="10" [loading]="loading" [rowHover]="true" styleClass="p-datatable-gridlines" [paginator]="true" [globalFilterFields]="['name','country.name','representative.name','status']" responsiveLayout="scroll">
                    <ng-template pTemplate="caption">
                        <div class="flex justify-content-between flex-column sm:flex-row">
                            <button pButton label="New" (click)="newCSItem()"></button>
                        </div>
                    </ng-template>
                    <ng-template pTemplate="header">
                        <tr>
                            <th style="min-width: 3rem">
                                <div class="flex justify-content-between align-items-center">
                                    Id
                                </div> 
                            </th>
                            <th style="min-width: 14rem">
                                <div class="flex justify-content-between align-items-center">
                                    Item
                                </div>
                            </th>
                            
                            <th style="min-width: 5rem">
                                <div class="flex justify-content-between align-items-center">
                                    UOM
                                </div>
                            </th>
                            <th style="min-width: 14rem">
                                <div class="flex justify-content-between align-items-center">
                                    Rate
                                </div>
                            </th>
                            <th style="min-width: 5rem">
                                <div class="flex justify-content-between align-items-center">
                                    Quantity
                                </div>
                            </th>
                            
                            <th style="min-width: 5rem">
                                <div class="flex justify-content-between align-items-center">
                                    Serial No
                                </div>
                            </th>

                            <th style="min-width: 5rem">
                                <div class="flex justify-content-between align-items-center">
                                    Batch No
                                </div>
                            </th>
                            <th style="min-width: 5rem">
                                <div class="flex justify-content-between align-items-center">
                                    Expiry Date
                                </div>
                            </th>
                            <th style="min-width: 14rem">
                                <div class="flex justify-content-between align-items-center">
                                    Brand
                                </div>
                            </th>
                            <th style="min-width: 10rem">
                                <div class="flex justify-content-between align-items-center">
                                    Title
                                </div>
                            </th>
                            <th style="min-width: 10rem">
                                <div class="flex justify-content-between align-items-center">
                                    Location
                                </div>
                            </th>

                            <th style="min-width: 3rem">
                                <div class="flex justify-content-between align-items-center">
                                    Actions
                                </div>
                            </th>
                            
                            
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-voucher let-i="rowIndex">
                        <tr>
                            <td>
                                {{voucher.id}}
                            </td>
                            
                            <td>
                                {{voucher.object.itemname}}
                            </td>
                            
                            <td>
                                {{voucher.object.uom ? voucher.object.uom.uom : ''}}
                            </td>

                            <td>
                                {{voucher.quantity}}
                            </td>
                            
                            <td>
                                {{voucher.rate}}
                            </td>
                            
                            <td>
                                {{voucher.serialno}}
                            </td>

                            <td>
                                {{voucher.batchno}}
                            </td>

                            <td>
                                {{voucher.expirydate}}
                            </td>

                            <td>
                                {{voucher.brand}}
                            </td>

                            <td>
                                {{voucher.title}}
                            </td>

                            <td>
                                {{voucher.location.location}}
                            </td>

                            <td>
                                <div class="flex flex-row gap-1">
                                    <button pButton class="p-button-sm" (click)="handleDeleteVoucher(i)">DEL</button>
                                </div>
                            </td>
                            
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="8">No vouchers found.</td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="loadingbody">
                        <tr>
                            <td colspan="8">Loading vouchers. Please wait.</td>
                        </tr>
                    </ng-template>
                </p-table>
                <div class="mt-4 flex justify-content-end">
                    <button pButton pRipple class="p-button-sm w-max" (click)="saveClosingStockList()">Save</button>                    
                </div>
            </div>
        </div>
    </div>




    <!-- <ng-template [ngIf]="inProgress">
            <div class="flex justify-content-center align-items-center absolute z-5 h-full w-full top-0 left-0" id="modal">
                <p-progressSpinner></p-progressSpinner>
            </div>
    </ng-template> -->

</p-dialog>

<app-closing-stock-item-form [displayCSItemFormModal]="showCSItemForm" (onHideDialog)="hideCSForm()" (onSaveDialog)="saveCSForm($event)"></app-closing-stock-item-form>